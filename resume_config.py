# -*- coding: utf-8 -*-
import os

# 简历配置文件路径
RESUME_FILE_PATH = os.path.join(os.path.dirname(__file__), "resume_data.txt")

# 示例简历内容（当配置文件不存在时使用）
_example_resume = """
# 个人简历
**电话**：1XX-XXXX-XXXX  
**邮箱**：xxx@example.com  
**现居城市**：某一线城市  
**微信**：1XX-XXXX-XXXX  
**年龄**：XX岁  
**当前状态**：在职  
**求职意向**：后端开发

## 专业技能
1. 掌握主流编程语言基础知识，涵盖集合、反射、多线程、线程池、锁以及基本数据结构。
2. 熟悉主流Web开发框架，了解微服务组件，熟悉服务治理、熔断降级、负载均衡相关知识。
3. 掌握多种编程语言，拥有开发分布式系统的经验，深入理解并发模型。
4. 掌握脚本语言编程，具有AIGC领域的应用开发经验，具备AI工作流设计及Agent开发能力。
5. 熟悉主流关系型数据库，有过冷热分离、数据迁移、慢查询优化等实操经验。
6. 熟悉文档型数据库，掌握其应用场景，了解慢查询优化及高可用方案。
7. 熟练掌握缓存中间件数据结构、应用场景、持久化策略，熟悉分布式锁。
8. 掌握容器编排平台基本应用场景以及底层原理。
9. 掌握容器化开发，集成CI实现自动化构建。
10. 了解分布式搜索引擎，熟悉其基本使用场景。
11. 熟悉消息中间件基本设计思想以及应用场景。

## 教育经历
**某大学** - 计算机相关专业 本科 20XX年XX月 - 20XX年XX月

## 工作经历
1. **某科技公司A** - 后端开发工程师 20XX年XX月 - 至今
2. **某科技公司B** - 服务端开发工程师 20XX年XX月 - 20XX年XX月
3. **某科技公司C** - 后端开发工程师 20XX年XX月 - 20XX年XX月

## 项目经验
### 项目一：企业服务平台
- 负责调研相关技术栈，设计并搭建应用程序。
- 通过AI实现语义分析及意图识别，显著降低人工服务压力。

### 项目二：社交类App
- 对后端多个模块进行业务逻辑重构和优化、功能开发与迭代。
- 对数据库的索引、慢查询进行优化，提升系统性能。

### 项目三：业务管理系统
- 参与需求设计评审、代码评审。
- 系统性能方面优化。
"""


def load_resume_content():
    """
    从配置文件加载简历内容
    如果配置文件不存在或为空，返回示例简历
    """
    if os.path.exists(RESUME_FILE_PATH):
        try:
            with open(RESUME_FILE_PATH, 'r', encoding='utf-8') as f:
                content = f.read().strip()
                # 检查是否为空或只包含注释
                lines = [line for line in content.split('\n') if line.strip() and not line.strip().startswith('#')]
                if lines:
                    print(f"已从配置文件加载简历: {RESUME_FILE_PATH}")
                    return content
        except Exception as e:
            print(f"读取简历配置文件失败: {e}")
    
    print("使用示例简历（请在 resume_data.txt 中配置真实简历）")
    return _example_resume


# 加载简历内容
resume_content = load_resume_content()

# 设计system prompt，告诉AI如何评估匹配度
system_prompt = """你是一位专业的招聘顾问，需要评估求职者简历与职位的匹配程度。
首先检查以下关键条件:
1.教育背景是否满足职位最低学历要求
2.工作经验年限是否达到职位要求的最低标准
3.非全栈岗位


如果以上任一条件不满足，直接返回:
{"score": 0,"analysis": "不符合基本要求","reason": "(在这里说明具体原因)"}

如果基本条件满足，请根据以下几点给出匹配度评分（满分100分）：
1. 技能匹配度（35分）：技术栈、编程语言、框架、工具等是否匹配
2. 经验相关度（30分）：项目经验与目标职位的相关程度
3. 行业背景（35分）：行业经验与公司业务的契合度


请给出详细的分析和最终的匹配分数，并且尤其重视技能和经验的匹配情况。
只返回JSON格式数据，不要包含任何其他文本或格式，不要使用```json这种标记。
"""
